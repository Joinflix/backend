  server:
    port: ${SERVER_PORT:8080}
    error:
      include-stacktrace: ${ERROR_STACKTRACE:always}
      include-message: ${ERROR_MESSAGE:always}

  spring:
    application:
      name: joinflex
    profiles:
      active: ${SPRING_PROFILES_ACTIVE:dev}
    output:
      ansi:
        enabled: ${ANSI_ENABLED:always}
    datasource:
      url: ${DATABASE_URL:jdbc:mysql://localhost:3306/joinflix?useUnicode=true&characterEncoding=UTF-8&allowPublicKeyRetrieval=true&serverTimezone=Asia/Seoul}
      username: ${DB_USERNAME:root}
      password: ${DB_PASSWORD:password}
    jpa:
      show-sql: ${JPA_SHOW_SQL:true}
      hibernate:
        ddl-auto: ${JPA_DDL_AUTO:create}
      properties:
        hibernate:
          dialect: org.hibernate.dialect.MySQLDialect
          jdbc.time_zone: Asia/Seoul
          format_sql: ${JPA_FORMAT_SQL:true}
          use_sql_comments: ${JPA_SQL_COMMENTS:true}
          generate_statistics: ${JPA_STATISTICS:true}
      defer-datasource-initialization: true
    sql:
      init:
        mode: always

    # Redis 설정 (RefreshToken 저장용)
    data:
      redis:
        host: ${REDIS_HOST:localhost}
        port: ${REDIS_PORT:6379}

    # Mail Server Configuration (Gmail)
    mail:
      host: smtp.gmail.com
      port: 587
      username: ${GOOGLE_USERNAME}@gmail.com
      password: ${GOOGLE_MAIL_PASSWORD}
      default-encoding: UTF-8
      properties:
        mail:
          smtp:
            auth: true
            starttls:
              enable: true

    devtools:
      restart:
        enabled: ${DEVTOOLS_RESTART:true}
      livereload:
        enabled: ${DEVTOOLS_LIVERELOAD:true}


  #actuator
  management:
    endpoints:
      web:
        base-path: ${ACTUATOR_BASE_PATH:/actuator}
        exposure:
          include: ${ACTUATOR_ENDPOINTS:*}
    endpoint:
      health:
        show-details: ${ACTUATOR_HEALTH_DETAILS:always}
      env:
        show-values: ${ACTUATOR_SHOW_VALUES:always}
    security:
      enabled: ${ACTUATOR_SECURITY:false}

  logging:
    level:
      root: ${ROOT_LOG_LEVEL:INFO}
      org.springframework.security:  ${SECURITY_LOG_LEVEL:TRACE}
      org.hibernate.SQL: ${HIBERNATE_SQL_LOG:DEBUG}
      org.hibernate.type.descriptor.sql.BasicBinder: ${HIBERNATE_PARAM_LOG:TRACE}
      org.springframework.web: ${WEB_LOG_LEVEL:DEBUG}
      org.springframework.transaction: ${TRANSACTION_LOG_LEVEL:DEBUG}
      com.sesac.joinflex: ${APP_LOG_LEVEL:DEBUG}
      org.springframework.web.socket: ${WEBSOCKET_LOG_LEVEL:DEBUG}
      org.springframework.messaging.simp: ${SIMPLE_LOG_LEVEL:DEBUG}
    file:
      name: ${LOG_FILE:}
    pattern:
      console: ${CONSOLE_LOG_PATTERN:%clr(%d{HH:mm:ss.SSS}){faint} %clr(%5p) %clr(${PID:- }){magenta} %clr(---){faint} %clr([%15.15t]){faint} %clr(%-40.40logger{39}){cyan} %clr(:){faint} %m%n${LOG_EXCEPTION_CONVERSION_WORD:-%wEx}}
      file: ${LOG_PATTERN:%d{yyyy-MM-dd HH:mm:ss.SSS} [%thread] %-5level %logger{36} - %msg%n}

  # 커스텀 설정 (JWT, OAuth, 결제 등)

  # JWT 설정
  jwt:
    # Access Token: 1 hour (현재 테스트를 위해 1분으로 설정됨)
    access-expiration: ${JWT_ACCESS_EXPIRATION:60000}
    # Refresh Token: 7 days
    refresh-expiration: ${JWT_REFRESH_EXPIRATION:604800000}
    secret: ${JWT_SECRET:mySecretKeyForJwtTokenGenerationMustBeLongEnough12345678901234567890}

  # Kakao OAuth 설정
  oauth:
    kakao:
      client-id: ${KAKAO_CLIENT_ID}
      client-secret: ${KAKAO_CLIENT_SECRET}
      redirect-uri: ${KAKAO_REDIRECT_URI:http://localhost:3000/oauth/kakao/callback}
      token-uri: https://kauth.kakao.com/oauth/token
      user-info-uri: https://kapi.kakao.com/v2/user/me

  # File Upload 설정
  file:
    upload-dir: ${FILE_UPLOAD_DIR:/uploads}

  # Portone 결제 설정
  portone:
    apiKey: ${PORTONE_APIKEY}
    apiSecret: ${PORTONE_SECRET}

  app:
    domain-url: ${APP_DOMAIN_URL:http://localhost:8080}